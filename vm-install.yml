%YAML 1.1
---
# Configuration file for vm-install

# Special options, not passed to virt-install.

vm-install-options:
  templates:
    - preseed.cfg.erb
    - anaconda-ks.cfg.erb
  domain: kenyonralph.com

# Keys in the mappings below are virt-install(1) options, and values
# are the arguments to those options, just like you would specify on
# the virt-install(1) command line.

defaults: &defaults
  connect: qemu:///system
  virt-type: kvm
  memory: 4096
  cpu: host
  network: bridge=br0
  console: pty,target_type=virtio
  serial: pty
  # Need package ovmf for UEFI.
  boot: uefi
  autostart:

# OS defaults

debian_defaults: &debian_defaults
  <<: *defaults
  os-variant: debian10
  location: https://deb.debian.org/debian/dists/stable/main/installer-amd64/
  initrd-inject: preseed.cfg

fedora_defaults: &fedora_defaults
  <<: *defaults
  location: https://mirrors.kernel.org/fedora/releases/31/Everything/x86_64/os/
  # Note: https://bugzilla.redhat.com/show_bug.cgi?id=1686464
  # https://github.com/virt-manager/virt-manager/commit/c6b5f22fa61d87557b5fab23be080073d2f7906e
  initrd-inject: anaconda-ks.cfg
  extra-args: inst.ks=file:/anaconda-ks.cfg

rhel_defauts: &rhel_defaults
  <<: *defaults
  cdrom: /var/lib/libvirt/images/rhel-8.0-x86_64-dvd.iso

# Specific VM instances

puppet:
  <<: *debian_defaults
  disk: size=10,path=/data/vms/puppet.sda

fedora:
  <<: *fedora_defaults
  disk: size=10,path=/data/vms/fedora.sda

rhel:
  <<: *rhel_defaults
  disk: size=10,path=/data/vms/rhel.sda

# Local Variables:
# coding: utf-8
# End:
...
